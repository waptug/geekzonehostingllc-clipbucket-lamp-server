!function(){"use strict";var e=null;e=void 0===window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(e,t){var s,l={},i={},r={};function n(e,t,s,l){return i={label:s,sources:t},"function"==typeof l?l(e,t,s):(e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}})),e)}var o=t.getComponent("MenuItem"),a=t.extend(o,{constructor:function(e,t,s,l){this.onClickListener=s,this.label=l,o.call(this,e,t),this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAsLabel(),this.selected(!0),this.addClass("vjs-selected"))},showAsLabel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(e){this.onClickListener(this);var t=this.player_.currentTime(),s=this.player_.paused();this.showAsLabel(),this.addClass("vjs-selected"),"function"!=typeof e&&"function"==typeof this.options_.customSourcePicker&&(e=this.options_.customSourcePicker);var l="loadeddata";"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(l="timeupdate"),n(this.player_,this.src,this.options_.label,e).one(l,function(){this.player_.currentTime(t),s||this.player_.play(),this.player_.handleTechSeeked_(),this.player_.trigger("resolutionchange"),1===$(".vjs-menu-item.vjs-selected .vjs-menu-item-text").closest(".vjs-menu.vjs-hidden").first().length&&$(".vjs-menu-item.vjs-selected .vjs-menu-item-text").closest(".vjs-menu.vjs-hidden").first().removeClass("vjs-hidden")})}}),c=t.getComponent("MenuButton"),u=t.extend(c,{constructor:function(e,s,l,i){if(this.sources=s.sources,this.label=i,this.label.innerHTML=s.initialySelectedLabel,c.call(this,e,s,l),this.controlText(lang_quality),l.dynamicLabel)this.el().appendChild(i);else{var r=document.createElement("span");t.dom.addClass(r,"vjs-resolution-button-staticlabel"),this.el().appendChild(r)}},createItems:function(){var e=[],t=this.sources&&this.sources.label||{},s=function(t){e.map(function(e){e.selected(e===t),e.removeClass("vjs-selected")})};for(var l in t)t.hasOwnProperty(l)&&(e.push(new a(this.player_,{label:l,src:t[l],initialySelected:l===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},s,this.label)),r[l]=e[e.length-1]);return e}});s=function(e){var s=t.mergeOptions(l,e),o=this,a=document.createElement("span"),c={};function h(e,t){return e.res&&t.res?+t.res-+e.res:0}function d(e){var t={label:{},res:{},type:{}};return e.map(function(e){y(t,"label",e),y(t,"res",e),y(t,"type",e),p(t,"label",e),p(t,"res",e),p(t,"type",e)}),t}function y(e,t,s){null==e[t][s[t]]&&(e[t][s[t]]=[])}function p(e,t,s){e[t][s[t]].push(s)}t.dom.addClass(a,"vjs-resolution-button-label"),o.updateSrc=function(e){if(!e)return o.src();o.controlBar.resolutionSwitcher&&(o.controlBar.resolutionSwitcher.dispose(),delete o.controlBar.resolutionSwitcher),e=e.sort(h);var l=function(e,t){var l=s.default,i="";"high"===l?(l=t[0].res,i=t[0].label):"low"!==l&&null!=l&&e.res[l]?e.res[l]&&(i=e.res[l][0].label):(l=t[t.length-1].res,i=t[t.length-1].label);return{res:l,label:i,sources:e.res[l]}}(c=d(e),e),i=new u(o,{sources:c,initialySelectedLabel:l.label,initialySelectedRes:l.res,customSourcePicker:s.customSourcePicker},s,a);return t.dom.addClass(i.el(),"vjs-resolution-button"),o.controlBar.resolutionSwitcher=o.controlBar.el_.insertBefore(i.el_,o.controlBar.getChild("fullscreenToggle").el_),o.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)},n(o,l.sources,l.label)},o.currentResolution=function(e,t){return null==e?i:(null!=r[e]&&r[e].onClick(t),o)},o.getGroupedSrc=function(){return c},o.ready(function(){o.options_.sources.length>1&&o.updateSrc(o.options_.sources),"Youtube"===o.techName_&&function(e){e.tech_.ytPlayer.setPlaybackQuality("default"),e.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(){e.trigger("resolutionchange")}),e.one("play",function(){var t=e.tech_.ytPlayer.getAvailableQualityLevels(),l={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"default"}},i=[];t.map(function(t){i.push({src:e.src().src,type:e.src().type,label:l[t].label,res:l[t].res,_yt:l[t].yt})});var r="auto",n=0,o=((c=d(i)).label.auto,new u(e,{sources:c,initialySelectedLabel:r,initialySelectedRes:n,customSourcePicker:function(t,s,l){return e.tech_.ytPlayer.setPlaybackQuality(s[0]._yt),e}},s,a));o.el().classList.add("vjs-resolution-button"),e.controlBar.resolutionSwitcher=e.controlBar.addChild(o)})}(o)})},t.registerPlugin("videoJsResolutionSwitcher",s)}(window,e)}();