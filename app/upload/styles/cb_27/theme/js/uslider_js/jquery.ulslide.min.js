(function(a){function b(e){var d=a.data(e,"uslTransformRotateY");var f=a.data(e,"uslTransformTranslateZ");var c="";if(d!==undefined){c+=" rotateY("+d+"deg) "}if(f!==undefined){c+=" translateZ("+f+"px) "}a(e).css({"-webkit-transform":c,transform:c})}a.cssHooks.uslTransformRotateY={set:function(d,e,c){a.data(d,"uslTransformRotateY",parseInt(e));b(d)},get:function(e,d){var c=a.data(e,"uslTransformRotateY");var f=c?c:0;return f}};a.cssHooks.uslTransformTranslateZ={set:function(d,e,c){a.data(d,"uslTransformTranslateZ",parseInt(e));b(d)},get:function(d,c){var e=a.data(d,"uslTransformTranslateZ");var f=e?e:0;return f}};a.fx.step.uslTransformRotateY=function(c){a.cssHooks.uslTransformRotateY.set(c.elem,c.now,c.unit)};a.fx.step.uslTransformTranslateZ=function(c){a.cssHooks.uslTransformTranslateZ.set(c.elem,c.now,c.unit)};ulslideEffects={flip3D:{init:function(c,d){if(d.debug){console.log("ulslideEffects.flip3D.init();")}c.css({overflow:"visible",transformStyle:"preserve-3d"});a("> *",c[0]).each(function(e){var f={uslTransformRotateY:"0deg",transformStyle:"preserve-3d","backface-visibility":"hidden","-webkit-backface-visibility":"hidden",top:"50%",left:"50%"};if(e==d.current){f.display="block"}else{f.display="none"}a(this).css(f)})},resize:function(c,d){if(d.debug){console.log("ulslideEffects.flip3D.resize();")}c.css({perspective:d.perspective+"px"});a("> *",c[0]).each(function(e){var f={margin:("-"+(d.height/2)+"px 0 0-"+(d.width/2)+"px")};a(this).css(f)})},slide:function(d,e,h,f,g){if(e.debug){console.log("ulslideEffects.flip3D.slide();")}if(e.direction=="f"){var c={prev_start:"0deg",prev_finish:180,current_start:"180deg",current_finish:360}}else{var c={prev_start:"360deg",prev_finish:180,current_start:"180deg",current_finish:0}}h.css({uslTransformRotateY:c.prev_start,opacity:1,display:"block"});f.css({uslTransformRotateY:c.current_start,opacity:1,display:"block"});h.animate({uslTransformRotateY:c.prev_finish,opacity:0},{duration:e.duration,easing:e.easing});f.animate({uslTransformRotateY:c.current_finish,opacity:1},{duration:e.duration,easing:e.easing,complete:function(){g()}})}},cube3D:{init:function(c,d){if(d.debug){console.log("ulslideEffects.cube3D.init();")}c.css({transformStyle:"preserve-3d",overflow:"visible"});a("> *",c[0]).each(function(e){var f={uslTransformRotateY:"0deg",transformStyle:"preserve-3d","backface-visibility":"hidden","-webkit-backface-visibility":"hidden",top:"50%",left:"50%"};if(e==d.current){f.display="block"}else{f.display="none"}a(this).css(f)})},resize:function(c,d){if(d.debug){console.log("ulslideEffects.cube3D.resize();")}var e=(d.perspective-d.width/2)/d.perspective;c.css({perspective:d.perspective+"px",transform:"scale("+e+")","-webkit-transform":"scale("+e+")"});a("> *",c[0]).each(function(f){var g={uslTransformTranslateZ:(d.width/2)+"px",margin:("-"+(d.height/2)+"px 0 0-"+(d.width/2)+"px")};a(this).css(g)})},slide:function(d,e,h,f,g){if(e.debug){console.log("ulslideEffects.cube3D.slide();")}if(e.direction=="f"){var c={prev_start:"0deg",prev_finish:90,current_start:"-90deg",current_finish:0}}else{var c={prev_start:"0deg",prev_finish:-90,current_start:"90deg",current_finish:0}}h.css({uslTransformRotateY:c.prev_start,display:"block"});f.css({uslTransformRotateY:c.current_start,display:"block"});h.animate({uslTransformRotateY:c.prev_finish},{duration:e.duration,easing:e.easing});f.animate({uslTransformRotateY:c.current_finish},{duration:e.duration,easing:e.easing,complete:g})}},slide:{init:function(c,d){if(d.debug){console.log("ulslideEffects.slide.init();")}},resize:function(c,d){if(d.debug){console.log("ulslideEffects.slide.resize();")}},slide:function(c,e,h,f,g){if(e.debug){console.log("ulslideEffects.slide.slide();")}var d=e.effect["axis"];if(d=="r"){d=c.array_rand(["x","y"])}if(d=="x"){if(e.prev!=e.current){if(e.direction=="f"){h.animate({left:-(e.width+e.effect["distance"])},e.duration,e.easing);f.css("left",e.width+e.effect["distance"])}else{h.animate({left:e.width+e.effect["distance"]},e.duration,e.easing);f.css("left",-(e.width+e.effect["distance"]))}}f.css("top",0);h.css("top",0);f.animate({left:0},e.duration,e.easing,g)}else{if(e.prev!=e.current){if(e.direction=="f"){h.animate({top:c[0].currentHeight+e.effect["distance"]},e.duration,e.easing,function(){h.css("left",-(e.width+e.effect["distance"]))});f.css("top",-(e.prevHeight+e.effect["distance"]))}else{h.animate({top:-(c[0].currentHeight+e.effect["distance"])},e.duration,e.easing,function(){h.css("left",-(e.width+e.effect["distance"]))});f.css("top",e.prevHeight+e.effect["distance"])}}f.css("left",0);h.css("left",0);f.animate({top:0},e.duration,e.easing,g)}}},fade:{init:function(c,d){if(d.debug){console.log("ulslideEffects.fade.init();")}},resize:function(c,d){if(d.debug){console.log("ulslideEffects.fade.resize();")}},slide:function(c,d,g,e,f){if(d.debug){console.log("ulslideEffects.fade.slide();")}e.css("display","none");e.css("left",0);e.css("top",0);g.fadeOut(d.duration,function(){g.css("display","none");e.fadeIn(d.duration,f)})}},crossfade:{init:function(c,d){if(d.debug){console.log("ulslideEffects.crossfade.init();")}},resize:function(c,d){if(d.debug){console.log("ulslideEffects.crossfade.resize();")}},slide:function(c,d,g,e,f){if(d.debug){console.log("ulslideEffects.crossfade.slide();")}e.css("display","none");e.css("left",0);e.css("top",0);g.fadeOut(d.duration,function(){g.css("display","none")});e.fadeIn(d.duration,f)}},rotate:{init:function(c,d){if(d.debug){console.log("ulslideEffects.rotate.init();")}c.css("overflow","visible")},resize:function(c,d){if(d.debug){console.log("ulslideEffects.rotate.resize();")}},slide:function(c,d,h,f,g){if(d.debug){console.log("ulslideEffects.rotate.slide();")}var e=d.direction=="f"?"-":"";f.animate({rotate:e+"90deg",scale:"0.01",opacity:0.3,"z-index":2,left:0,top:0},0);h.css("z-index",1);h.animate({opacity:0},d.duration,d.easing);f.animate({rotate:e+"360deg",scale:"1",opacity:1},d.duration,d.easing,g)}},scale:{init:function(c,d){if(d.debug){console.log("ulslideEffects.scale.init();")}},resize:function(c,d){if(d.debug){console.log("ulslideEffects.scale.resize();")}},slide:function(c,d,i,g,h){if(d.debug){console.log("ulslideEffects.scale.slide();")}if(d.direction=="f"){var f="-";var e=""}else{var f="";var e="-"}g.animate({scale:"0.05",opacity:0.3,"z-index":2,left:0,top:0,marginLeft:e+(d.fwidth/2)+"px"},0);i.css("z-index",1);i.animate({scale:"0.01",opacity:0,marginLeft:f+(d.fwidth/2)+"px"},d.duration,d.easing);g.animate({scale:"1",opacity:1,marginLeft:"0px"},d.duration,d.easing,h)}},carousel:{init:function(c,d){if(d.debug){console.log("ulslideEffects.carousel.init();")}a("> *",c[0]).each(function(f){var e=c.carouselGetFramePos(f,d.current);if(d.effect["axis"]=="y"){a(this).css({top:(e*d.fheight),left:"0"})}else{a(this).css({top:"0",left:(e*d.fwidth)})}});if(d.effect["axis"]=="y"){c.css("width",d.width);c.css("height",d.fheight*d.effect["showCount"]-d.effect["distance"])}else{c.css("width",d.fwidth*d.effect["showCount"]-d.effect["distance"]);c.css("height",d.height)}},resize:function(c,d){if(d.debug){console.log("ulslideEffects.carousel.resize();")}if(d.effect["axis"]=="y"){c.css("width",d.width);c.css("height",d.fheight*d.effect["showCount"]-d.effect["distance"])}else{c.css("width",d.fwidth*d.effect["showCount"]-d.effect["distance"]);c.css("height",d.height)}a("> *",c[0]).each(function(f){var e=c.carouselGetFramePos(f,d.current);if(d.effect["axis"]=="y"){a(this).css({top:(e*d.fheight),left:"0"})}else{a(this).css({top:"0",left:(e*d.fwidth)})}})},slide:function(c,d,g,e,f){if(d.debug){console.log("ulslideEffects.carousel.slide();")}a("> *",c[0]).each(function(j){liel=a(this);var h=c.carouselGetFramePos(j,d.current);if(d.direction=="f"){var k=c.carouselGetFramePos(j,d.current-1)}else{var k=c.carouselGetFramePos(j,d.current+1)}if(d.effect["axis"]=="y"){if((d.direction=="f")&&(h==0)){liel.css("top",(-1*d.fheight));liel.animate({top:h*d.fheight},d.duration,d.easing)}else{if((d.direction=="f")&&(k+1==d.effect["showCount"])){liel.animate({top:(d.effect["showCount"])*d.fheight},d.duration,d.easing)}else{if((d.direction=="b")&&(k==0)){liel.animate({top:-1*d.fheight},d.duration,d.easing)}else{if((d.direction=="b")&&(h+1==d.effect["showCount"])){liel.css("top",(h+1)*d.fheight);liel.animate({top:h*d.fheight},d.duration,d.easing)}else{if((h<d.effect["showCount"])&&(h>=0)){liel.animate({top:h*d.fheight},d.duration,d.easing)}else{liel.css("top",(h*d.fheight))}}}}}}else{if((d.direction=="f")&&(h==0)){liel.css("left",(-1*d.fwidth));liel.animate({left:h*d.fwidth},d.duration,d.easing)}else{if((d.direction=="f")&&(k+1==d.effect["showCount"])){liel.animate({left:(d.effect["showCount"])*d.fwidth},d.duration,d.easing)}else{if((d.direction=="b")&&(k==0)){liel.animate({left:-1*d.fwidth},d.duration,d.easing)}else{if((d.direction=="b")&&(h+1==d.effect["showCount"])){liel.css("left",(h+1)*d.fwidth);liel.animate({left:h*d.fwidth},d.duration,d.easing)}else{if((h<d.effect["showCount"])&&(h>=0)){liel.animate({left:h*d.fwidth},d.duration,d.easing)}else{liel.css("left",(h*d.fwidth))}}}}}}setTimeout(f,d.duration+100)})}},test:{init:function(c,d){if(d.debug){console.log("ulslideEffects.test.init();")}},resize:function(c,d){if(d.debug){console.log("ulslideEffects.test.resize();")}},slide:function(c,d,g,e,f){if(d.debug){console.log("ulslideEffects.test.slide();")}}}};a.fn.ulslide=function(i){var g=this;if(g.length==0){return false}var j=g[0];if(!a(j).attr("id")){if(ulslide_last_id==undefined){ulslide_last_id=0}ulslide_last_id++;a(j).attr("id","ulslide-"+ulslide_last_id)}var e=a(j).attr("id");i=a.extend({effect:{type:"slide",axis:"x",distance:20},perspective:1000,duration:600,direction:"f",autoslide:false,current:0,canResize:false,width:g.width(),height:"auto",statusbar:true,loader:"",loadClass:"usl-loading",loadTimeout:5000,lazyload:false,ajax:false,mousewheel:false,pager:false,nextButton:false,prevButton:false,printCurrentTo:false,onAnimateStart:function(n,o){},onAnimate:function(n,o){},onAjaxStart:function(n,o){},onAjaxStop:function(n,o){},beforeResize:function(n,o){},onResize:function(n,o){},debug:false},i);if(typeof i.affect!="undefined"){i.effect["type"]=i.affect}if(typeof i.axis!="undefined"){i.effect["axis"]=i.axis}if(typeof i.padding!="undefined"){i.effect["distance"]=i.padding}if(typeof i.navigator!="undefined"){i.pager=i.navigator}if(typeof i.print_current!="undefined"){i.printCurrentTo=i.print_current}if(typeof i.bnext!="undefined"){i.nextButton=i.bnext}if(typeof i.bprev!="undefined"){i.prevButton=i.bprev}if(i.canResize&&i.height=="auto"){i.height=g.height()}if(typeof i.effect["distance"]=="undefined"){i.effect["distance"]=20}i.fwidth=i.width+i.effect["distance"];i.fheight=i.height+i.effect["distance"];i.prev=i.current;i.count=a("> *",g).length;if(i.lazyload){a("img",g).each(function(o){var n=a(this);n.attr("rel",n.attr("src"));if(o>0){n.removeAttr("src")}})}g.carouselGetFramePos=function(p,q){if(p>=i.effect["showCount"]-q){var n=i.count-i.effect["showCount"];var o=(p+q-i.effect["showCount"])-n;return o}else{return p+q}};a("> *",g).each(function(n){var o=a(this);o.addClass("slide-node slide-node-"+n);o.css({position:"absolute",margin:"0",width:i.width,overflow:"hidden"});if(n==i.current){o.css({top:"0",left:"0"})}else{o.css({top:"0",left:-(i.width+i.effect["distance"])})}});g.css({"list-style":"none",position:"relative",padding:0,overflow:"hidden"});if(!i.canResize){g.css("width",i.width);if(i.height=="auto"){g.css("height",a("> *:eq("+i.current+")",g).height())}else{g.css("height",i.height)}i.prevHeight=i.height}var m=ulslideEffects[i.effect["type"]];if(m!=undefined){m.init(g,i);m.resize(g,i)}function f(){var n=i.beforeResize(i,j);if(n&&n.width&&n.height){i.width=n.width;i.height=n.height}else{i.width=g.width();i.height=g.height()}i.fwidth=i.width+i.effect["distance"];i.fheight=i.height+i.effect["distance"];if(i.height=="auto"){g.css("height",a("> *:eq("+i.current+")",g).height());console.log("resize auto height: "+a("> *:eq("+i.current+")",g).height())}i.prevHeight=i.height;a("> *",g).each(function(o){var p=a(this);p.addClass("slide-node slide-node-"+o);p.css("position","absolute");p.css("margin","0");p.css("distance","0");p.css("width",i.width);p.css("overflow","hidden");if(i.effect["type"]!="carousel"){if(o==i.current){p.css("top","0");p.css("left","0")}else{p.css("top","0");p.css("left",-(i.width+i.effect["distance"]))}if(i.height=="auto"){p.css("height",a("> *:eq("+i.current+")",g).height())}else{p.css("height",i.height)}}});if(m!=undefined){m.resize(g,i)}i.onResize(i,j)}j.getSlide=function c(n){return a("> *:eq("+n+")",j)};j.array_rand=function(n){return n[Math.floor(Math.random()*n.length)]};function k(){var n=j.uslCurrent();i.direction="f";if(n+1<i.count){j.uslRefresh(n+1)}else{j.uslRefresh(0)}}function h(){var n=j.uslCurrent();i.direction="b";if(n>0){j.uslRefresh(n-1)}else{j.uslRefresh(i.count-1)}}if(i.height=="auto"){j.currentHeight=j.getSlide(i.current).height()}else{j.currentHeight=i.height}j.uslCurrent=function(o){if(o==undefined){return i.current}else{var n=j.uslCurrent();var p=o;i.current=o;return o}};j.autoslideNext=function(){k()};j.initAutoslide=function(){if(i.TimeoutID){clearTimeout(i.TimeoutID)}i.TimeoutID=setTimeout("jQuery('#"+a(j).attr("id")+"')[0].autoslideNext()",i.autoslide);if(i.debug){console.log("initAutoslide: "+i.TimeoutID)}};j.clearAutoslide=function(){if(i.TimeoutID){clearTimeout(i.TimeoutID)}};j.uslRefresh=function(s,o,u){if(i.debug){console.log("uslRefresh()")}if(!j.ready){if(i.debug){console.log("uslRefresh / "+i.id+": ! thisEl.ready")}setTimeout("jQuery('#"+a(j).attr("id")+"')[0].uslRefresh()",400);return}if(i.LoadTimeoutID){clearTimeout(i.LoadTimeoutID)}j.ready=false;if(typeof(s)!="undefined"){j.uslCurrent(s)}j.clearAutoslide();var r=j.getSlide(i.prev);var t=j.getSlide(i.current);t.css("display","block");function q(){if(i.debug){console.log("doRefresh()")}i.onAnimateStart(i,j);if(i.height=="auto"){j.currentHeight=j.getSlide(i.current).height();i.prevHeight=j.getSlide(i.prev).height()}function v(){if(i.debug){console.log("finish_animate(): start")}if(i.printCurrentTo){a(i.printCurrentTo).html(i.current+1)}if((i.prev!=i.current)&&(i.effect["type"]!="carousel")){r.css("display","none")}if(i.height=="auto"){g.animate({height:j.currentHeight},250)}if(i.debug){console.log("finish_animate(): autoslide = "+i.autoslide)}if(i.autoslide){j.initAutoslide()}i.onAnimate(i,j);i.prev=i.current;j.uslRefreshClasses();j.ready=true;if(typeof u!="undefined"){u()}}if(i.prev==i.current){v();return}if(m!=undefined){m.slide(g,i,r,t,v)}}if(i.ajax){i.onAjaxStart(i,j);var n=j.getSlide(i.current)[0].usl_ajax_loaded;j.uslAjaxLoadSlide(i.current,function(){i.onAjaxStop(i,j);q()})}else{if(i.lazyload){var p=a("img",t[0]);p.each(function(w){var v=a(this);v.attr("src",v.attr("rel"))});i.z_img_count=p.length;i.z_img_loaded=0;p.each(function(){if(this.complete){i.z_img_loaded++}else{a(this).load(function(){i.z_img_loaded++;if(i.z_img_loaded==i.z_img_count){q()}})}});if(i.z_img_loaded==i.z_img_count){q()}return}q()}};j.uslAjaxLoadSlide=function(o,q){var p=j.getSlide(o);if(p[0].usl_ajax_loaded){q()}else{var n=a(i.pager).eq(o).attr("href");p[0].usl_ajax_loaded=true;p.load(n+"?ajax=1",false,q)}};j.uslRefreshClasses=function(){if(i.count>1){if(i.nextButton){a(i.nextButton).addClass("active")}if(i.prevButton){a(i.prevButton).addClass("active")}}if(i.pager){a(i.pager).removeClass("usl-current");a(i.pager+".usl-pager-"+j.uslCurrent()).addClass("usl-current");a(i.pager).parent().removeClass("usl-current-parent");a(i.pager+".usl-pager-"+j.uslCurrent()).parent().addClass("usl-current-parent")}};if(i.nextButton){a(i.nextButton).click(function(){k();return false})}if(i.prevButton){a(i.prevButton).click(function(){h();return false})}function d(o){var n=a(o);n.each(function(p){this.usl_navigator_index=p;a(this).addClass("usl-pager-"+p)});n.click(function(){var p=this.usl_navigator_index;if((p<i.count)&&(p!=j.uslCurrent())){if(p>j.uslCurrent()){i.direction="f"}else{i.direction="b"}j.uslRefresh(p)}return false})}if(i.pager){d(i.pager)}if(i.navigator2){d(i.navigator2)}function l(n){if(n){g.addClass("usl-loading");g.parent().addClass("usl-parent-loading");if(i.loader){jQuery(i.loader).addClass(i.loadClass)}}else{g.removeClass("usl-loading");g.parent().removeClass("usl-parent-loading");if(i.loader){jQuery(i.loader).removeClass(i.loadClass)}}}j.uslStatusbar=function(){function n(p){if(!p.complete){return false}if(typeof p.naturalWidth!=="undefined"&&p.naturalWidth===0){return false}return true}if(i.lazyload){var o=a(">li:eq("+i.current+") img",j)}else{var o=a("img",j)}i.img_count=o.length;if(i.img_count){l(true)}i.img_loaded=0;o.each(function(){if(n(this)){i.img_loaded++;if(i.debug){console.log(a(this).attr("src")+" loaded")}}else{a(this).load(function(){i.img_loaded++;if(i.debug){console.log("Img LOAD / "+i.img_loaded+" of "+i.img_count)}if(i.img_loaded==i.img_count){l(false);j.ready=true;j.uslRefresh()}});if(i.debug){console.log(a(this).attr("src")+" NOT loaded")}}});if(i.debug){console.log("uslStatusbar() / "+i.img_loaded+" of "+i.img_count)}if(i.img_loaded==i.img_count){l(false);j.ready=true;j.uslRefresh()}i.LoadTimeoutID=setTimeout(function(){l(false);j.ready=true;j.uslRefresh()},i.loadTimeout)};if(i.statusbar&&!i.ajax){j.uslStatusbar()}if(i.mousewheel){g.bind("mousewheel",function(n,o){if(j.ready){if(o<0){k()}else{h()}}return false})}if(i.canResize){g.on("resize",f);jQuery(window).on("resize",f);f()}if(!i.statusbar||i.ajax){j.ready=true;j.uslRefresh()}}})(jQuery);